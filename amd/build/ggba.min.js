define(["jquery","//www.geogebra.org/apps/deployggb.js","core/yui"],function(a,b){return{init:function(){window.GGBA=this,window.ggbAppletOnLoad=function(){a("#ggbApplet").on("keypress, keydown",window.GGBA.checkEnter),"undefined"!=typeof window.applet1&&"undefined"!=typeof document.ggbApplet&&window.GGBA.ggbparametersin.length&&(window.GGBA.ggbparametersin.val(JSON.stringify(window.applet1.getParameters())),window.GGBA.ggbviewsin.val(JSON.stringify(window.applet1.getViews())),window.GGBA.ggbcodebaseversionin.val(window.applet1.getHTML5CodebaseVersion()))},this.ggbparametersin=a('input[name="ggbparameters"]'),this.ggbviewsin=a('input[name="ggbviews"]'),this.ggbcodebaseversionin=a('input[name="ggbcodebaseversion"]'),void 0!==a("#applet_parameters")[0]&&(this.ggbDataset=a("#applet_parameters")[0].dataset,this.parameters=JSON.parse(this.ggbDataset.parameters),this.lang=this.ggbDataset.lang,this.parameters.language=this.lang,window.applet1=new b(this.parameters,(!0)),window.applet1.setHTML5Codebase("https://www.geogebra.org/apps/5.0.410.0/web3d"),this.ggbloaded=!1,this.ggbdisplaytoggle=a("[class*=expand_assignsubmission_geogebra]"),"undefined"!=typeof this.ggbdisplaytoggle&&1==this.ggbdisplaytoggle.length?this.ggbdisplaytoggle.on("click",function(){window.GGBA.ggbloaded||(window.applet1.inject("applet_container1","preferHTML5"),window.GGBA.ggbloaded=!0)}):(window.applet1.inject("applet_container1","preferHTML5"),this.ggbloaded=!0)),a("#mform1").on("submit",function(){"undefined"!=typeof window.applet1&&"undefined"!=typeof document.ggbApplet&&window.GGBA.ggbparametersin.length&&(window.GGBA.ggbparametersin.val(JSON.stringify(window.applet1.getParameters())),window.GGBA.parameters.ggbBase64=document.ggbApplet.getBase64(),window.GGBA.ggbparametersin.val(JSON.stringify(window.GGBA.parameters)),window.GGBA.ggbviewsin.val(JSON.stringify(window.applet1.getViews())),window.GGBA.ggbcodebaseversionin.val(window.applet1.getHTML5CodebaseVersion()))}),a("#applet_container1").on("mouseleave",function(){"undefined"!=typeof window.applet1&&"undefined"!=typeof document.ggbApplet&&window.GGBA.ggbparametersin.length&&(window.GGBA.ggbparametersin.val(JSON.stringify(window.applet1.getParameters())),window.GGBA.parameters.ggbBase64=document.ggbApplet.getBase64(),JSON.stringify(window.GGBA.parameters)!=window.GGBA.ggbparametersin.val()&&M.core_formchangechecker.set_form_changed(),window.GGBA.ggbparametersin.val(JSON.stringify(window.GGBA.parameters)),window.GGBA.ggbviewsin.val(JSON.stringify(window.applet1.getViews())),window.GGBA.ggbcodebaseversionin.val(window.applet1.getHTML5CodebaseVersion()))})},checkEnter:function(a){a=a||event;var b=/textarea/i.test((a.target||a.srcElement).tagName);return b||13!==(a.keyCode||a.which||a.charCode||0)}}});